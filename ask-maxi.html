<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preg√∫ntale a Maxi - Aprender Bitcoin</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .chat-container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 2rem;
        }

        .chat-intro {
            background: #fff3e0;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--bitcoin-orange);
        }

        .chat-intro h1 {
            color: var(--bitcoin-orange);
            margin-bottom: 1rem;
        }

        .chat-intro ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .chat-box {
            background: var(--white);
            border: 2px solid var(--border-gray);
            border-radius: 10px;
            height: 500px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 1rem 1.25rem;
            border-radius: 12px;
            line-height: 1.6;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: var(--bitcoin-orange);
            color: var(--white);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .message.bot {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            color: #1f2937;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            border-left: 4px solid var(--bitcoin-orange);
            max-width: 85%;
            line-height: 1.8;
        }

        .message.bot strong {
            color: #1f2937;
            font-weight: 700;
        }

        .message.bot h4 {
            color: #1f2937;
            margin-bottom: 12px;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .message.bot h5 {
            color: #374151;
            margin-top: 16px;
            margin-bottom: 8px;
            font-size: 1rem;
            font-weight: 600;
        }

        .message.bot ul {
            margin: 12px 0;
            padding-left: 24px;
        }

        .message.bot li {
            margin: 8px 0;
        }

        .message.bot a {
            color: var(--bitcoin-orange);
            font-weight: 600;
            text-decoration: none;
            border-bottom: 2px solid transparent;
            transition: border-color 0.2s;
        }

        .message.bot a:hover {
            border-bottom-color: var(--bitcoin-orange);
        }

        .typing-indicator {
            align-self: flex-start;
            padding: 1rem 1.25rem;
            background: var(--light-gray);
            border-radius: 12px;
            border-bottom-left-radius: 4px;
            display: none;
        }

        .typing-indicator.show {
            display: block;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--medium-gray);
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .input-container {
            border-top: 2px solid var(--border-gray);
            padding: 1.25rem;
            display: flex;
            gap: 1rem;
            background: var(--light-gray);
        }

        .chat-input {
            flex: 1;
            padding: 0.875rem 1.25rem;
            border: 2px solid var(--border-gray);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--bitcoin-orange);
        }

        .send-button {
            background: var(--bitcoin-orange);
            color: var(--white);
            border: none;
            padding: 0.875rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .send-button:hover:not(:disabled) {
            background: #d97706;
            transform: translateY(-2px);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .welcome-message {
            text-align: center;
            color: var(--medium-gray);
            padding: 3rem 2rem;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .chat-container {
                padding: 1rem;
            }

            .chat-box {
                height: 450px;
            }

            .message {
                max-width: 90%;
            }

            .send-button {
                padding: 0.875rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <a href='/'><span class="bitcoin-symbol">‚Çø</span> Aprender Bitcoin</a>
            </div>
            <ul class="nav-links">
                <li><a href='/'>Inicio</a></li>
                <li><a href="/#capitulos">Cap√≠tulos</a></li>
            </ul>
        </div>
    </nav>

    <main class="chat-container">
        <div class="chat-intro">
            <h1>üí¨ Preg√∫ntale a Maxi</h1>
            <p>Soy <strong>Maxi ‚Çø</strong>, un agente de IA corriendo en un nodo de Bitcoin en Monterrey, M√©xico. Puedo ayudarte con:</p>
            <ul>
                <li>Preguntas sobre Bitcoin, dinero y econom√≠a austriaca</li>
                <li>Explicaciones del contenido de los cap√≠tulos</li>
                <li>Estrategias de ahorro y pr√©stamos con Bitcoin</li>
                <li>Informaci√≥n sobre ArcadiaB y servicios B2X</li>
            </ul>
            <p style="margin-top: 1rem;"><em>Escribe tu pregunta abajo y presiona Enter o haz clic en Enviar.</em></p>
        </div>

        <div class="chat-box">
            <div class="messages-container" id="messages">
                <div class="welcome-message">
                    üëã ¬°Hola! Preg√∫ntame cualquier cosa sobre Bitcoin...
                </div>
            </div>
            <div class="typing-indicator" id="typing">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="input-container">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="chatInput" 
                    placeholder="Escribe tu pregunta aqu√≠..."
                    autocomplete="off"
                >
                <button class="send-button" id="sendButton">
                    Enviar
                </button>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 Aprender Bitcoin | Creado por <a href="https://boydcohen.com" style="color: var(--bitcoin-orange);">Boyd Cohen</a> & Maxi ‚Çø</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                <a href="https://arcadiab.com" style="color: var(--bitcoin-orange);">ArcadiaB</a> | 
                <a href="https://x.com/boydcohen" style="color: var(--bitcoin-orange);">Twitter</a>
            </p>
        </div>
    </footer>

    <script>
        const messagesContainer = document.getElementById('messages');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typing');

        // Remove welcome message on first interaction
        let firstMessage = true;

        // Mock responses (client-side for now)
        const mockResponses = {
            bitcoin: "Bitcoin es dinero digital descentralizado con oferta fija de 21 millones. A diferencia del peso mexicano, NADIE puede imprimir m√°s Bitcoin. Es el primer dinero en la historia que cumple perfectamente las 6 caracter√≠sticas del buen dinero.\n\n¬øQuieres profundizar en alg√∫n aspecto espec√≠fico? Pregunta sobre escasez, miner√≠a, o c√≥mo comprar en M√©xico.",
            
            comprarBitcoin: "En M√©xico puedes comprar Bitcoin de varias formas:\n\nüè¢ **Exchanges mexicanos:**\n‚Ä¢ **ArcadiaB** - Primera empresa de tesorer√≠a Bitcoin certificada (ASOFOM). Compra/venta + pr√©stamos B2X. <a href=\"https://arcadiab.com\" target=\"_blank\">arcadiab.com</a>\n‚Ä¢ Bitso - Exchange m√°s grande de M√©xico\n‚Ä¢ Kapital (ahora Coinstore M√©xico)\n\nü§ù **P2P (peer-to-peer):**\n‚Ä¢ Azteco - Compra con efectivo en tiendas Oxxo\n‚Ä¢ Bisq - Exchange descentralizado\n‚Ä¢ RoboSats - P2P privado v√≠a Lightning\n\nüèß **ATMs Bitcoin:**\n‚Ä¢ Busca cajeros cerca en coinatmradar.com\n‚Ä¢ Compra con efectivo, recibe Bitcoin instant√°neo\n\n‚ö†Ô∏è **Importante para holders:**\nSi ya tienes entre 0.1-10 BTC y necesitas liquidez ocasional **SIN vender**, ArcadiaB ofrece pr√©stamos B2X respaldados por tu Bitcoin. Mantienes exposici√≥n al activo mientras obtienes pesos.\n\n‚Üí <a href=\"https://arcadiab.com\" target=\"_blank\">Conocer pr√©stamos B2X</a>\n\n¬øPrimera vez comprando Bitcoin? Te recomiendo empezar con ArcadiaB o Bitso.",
            
            gastarBitcoin: "¬°S√≠! Hoy hay miles de restaurantes y tiendas en M√©xico que aceptan Bitcoin.\n\nüó∫Ô∏è **Encuentra negocios cerca de ti:**\nVisita <a href=\"https://btcmap.org/map\" target=\"_blank\">btcmap.org/map</a> para ver el mapa de comercios que aceptan Bitcoin en M√©xico.\n\nüåê **Econom√≠as circulares Bitcoin:**\nM√©xico tiene aproximadamente una docena de \"econom√≠as circulares\" - comunidades donde varios negocios y personas intercambian valor regularmente usando Bitcoin. Algunas de las m√°s activas est√°n en:\n‚Ä¢ Playa del Carmen\n‚Ä¢ Ciudad de M√©xico\n‚Ä¢ Guadalajara\n‚Ä¢ Monterrey\n\nüí° **Tip:** Muchos negocios aceptan Bitcoin v√≠a Lightning Network, que permite pagos instant√°neos y con comisiones m√≠nimas.\n\nüì± **¬øNecesitas una wallet?**\nPara pagar con Bitcoin necesitas una wallet Lightning. Algunas opciones:\n‚Ä¢ Blink (antes Bitcoin Beach Wallet)\n‚Ä¢ Wallet of Satoshi\n‚Ä¢ Phoenix\n\nüè¶ **Wallet ArcadiaB:**\nTambi√©n <strong>ArcadiaB</strong>, el patrocinador principal de aprenderbitcoin.mx, tiene su propia wallet de Bitcoin y Lightning. Te ayudaremos a descargarla y aprender a usarla en los pr√≥ximos cap√≠tulos.\n\n¬øQuieres saber c√≥mo hacer tu primer pago con Bitcoin?",
            
            arcadiab: "ArcadiaB es la primera empresa de tesorer√≠a Bitcoin certificada en M√©xico (ASOFOM).\n\n**Servicios principales:**\n\nüè¶ **Compra/Venta de Bitcoin:**\nExchange profesional para comprar o vender Bitcoin en pesos mexicanos.\n\nüí∞ **Pr√©stamos B2X (Bitcoin-backed):**\n‚Ä¢ Usa tu Bitcoin como colateral\n‚Ä¢ Obt√©n liquidez en pesos sin vender\n‚Ä¢ Mant√©n exposici√≥n al activo\n‚Ä¢ Inter√©s competitivo (12-15% anual)\n‚Ä¢ Sin impuestos ISR (no es venta)\n‚Ä¢ Proceso 100% digital\n\n**¬øC√≥mo funciona B2X?**\n1. Depositas Bitcoin como garant√≠a\n2. Recibes pesos (hasta 50% LTV)\n3. Usas el dinero para lo que necesites\n4. Pagas el pr√©stamo\n5. Recuperas tu Bitcoin (que probablemente subi√≥ de precio)\n\n**Requisitos:**\n‚Ä¢ M√≠nimo 0.1 BTC\n‚Ä¢ Cliente mexicano\n‚Ä¢ KYC/AML compliance\n\n‚Üí <a href=\"https://arcadiab.com\" target=\"_blank\">Solicitar pr√©stamo B2X</a>\n‚Üí <a href=\"https://arcadiab.com\" target=\"_blank\">Comprar/vender Bitcoin</a>\n\n¬øTienes Bitcoin y necesitas liquidez ocasional? B2X podr√≠a ser perfecto para ti.",
            
            lightning: "Lightning Network es una \"segunda capa\" sobre Bitcoin que permite:\n\n‚ö° **Pagos instant√°neos** - Confirmaci√≥n en menos de 1 segundo\nüí∏ **Comisiones m√≠nimas** - Centavos de peso por transacci√≥n\nüîê **Privacidad mejorada** - Transacciones no siempre visibles en blockchain\n\n**¬øC√≥mo funciona?**\nAbres un \"canal de pago\" con otra persona o negocio. Dentro de ese canal pueden hacer transacciones ilimitadas sin tocar la blockchain principal. Solo cuando cierran el canal, el resultado final se registra en Bitcoin.\n\n**En M√©xico:**\nMuchos negocios que aceptan Bitcoin usan Lightning porque:\n‚Ä¢ Cliente paga instant√°neamente (sin esperar 10 minutos)\n‚Ä¢ Comisi√≥n casi cero (vs $1-5 USD en Bitcoin normal)\n‚Ä¢ Perfecto para compras peque√±as (caf√©, tacos, etc.)\n\n**Wallets Lightning recomendadas:**\n‚Ä¢ Blink (mexicana, muy f√°cil)\n‚Ä¢ Wallet of Satoshi (simple para comenzar)\n‚Ä¢ Phoenix (m√°s avanzada, auto-custodia)\n\nEl Cap√≠tulo 8 del curso cubre Lightning en detalle.\n\n¬øQuieres probar tu primer pago Lightning?",
            
            seguridad: "Bitcoin es extremadamente seguro a nivel de red, pero **t√∫ eres responsable de proteger tus claves**.\n\nüîê **La regla de oro:**\n\"Not your keys, not your coins\" - Si no controlas las claves privadas, no controlas el Bitcoin.\n\n**Mejores pr√°cticas:**\n\n**Para peque√±as cantidades (<$5,000 USD):**\n‚Ä¢ Wallet m√≥vil (Blink, Wallet of Satoshi)\n‚Ä¢ Anota tu seed phrase (12-24 palabras)\n‚Ä¢ **NUNCA compartas la seed phrase**\n\n**Para cantidades medianas ($5,000-50,000 USD):**\n‚Ä¢ Hardware wallet (Ledger, Trezor, Coldcard)\n‚Ä¢ Seed phrase en lugar f√≠sico seguro\n‚Ä¢ Considera usar passphrase adicional\n\n**Para cantidades grandes (>$50,000 USD):**\n‚Ä¢ Hardware wallet + multisig\n‚Ä¢ Seed phrase distribuida en m√∫ltiples ubicaciones\n‚Ä¢ Testamento/plan de herencia\n\n‚ö†Ô∏è **Errores comunes que causan p√©rdidas:**\n1. Perder seed phrase (70% de p√©rdidas)\n2. Guardar seed digitalmente (hackeable)\n3. Caer en phishing (sitios falsos)\n4. Usar exchanges no confiables\n5. No hacer backups\n\n**Servicios de custodia profesional:**\nSi prefieres que expertos manejen la seguridad, ArcadiaB ofrece servicios de custodia certificados.\n\nEl Cap√≠tulo 9 cubre seguridad en profundidad.\n\n¬øTienes Bitcoin y quieres asegurarte que est√° protegido?",
            
            curso: "Este curso tiene 4 cap√≠tulos:\n\nüìñ **Cap 1: ¬øQu√© es el dinero?** - Las 6 caracter√≠sticas, por qu√© el peso falla\nüìú **Cap 2: Historia del dinero** - Conchas, cacao, oro, la evoluci√≥n hacia Bitcoin\n‚õèÔ∏è **Cap 3: El oro** - Por qu√© domin√≥ 5,000 a√±os y por qu√© Bitcoin es mejor\nüí∏ **Cap 4: Dinero fiat** - Nixon Shock 1971, inflaci√≥n, qui√©n paga el costo\n\n¬øEn cu√°l cap√≠tulo necesitas ayuda?",
            
            inflacion: "**Inflaci√≥n = Robo silencioso**\n\nCuando Banxico imprime pesos:\n1. Gobierno/bancos reciben dinero nuevo PRIMERO (a precios viejos)\n2. Ese dinero circula y sube precios\n3. Trabajadores/clase media lo reciben AL FINAL (precios ya inflados)\n\n**Resultado:** Transferencia de riqueza de abajo hacia arriba.\n\n**Datos M√©xico:**\n‚Ä¢ Inflaci√≥n promedio 2020-2024: ~5% anual\n‚Ä¢ Tu dinero pierde MITAD de valor cada 14 a√±os\n\n**Bitcoin:** Oferta fija. Nadie puede imprimir m√°s. Todos juegan con las mismas reglas.",
            
            oro: "**Por qu√© el oro domin√≥ 5,000 a√±os:**\n‚Ä¢ Stock-to-Flow de 66 a√±os (muy dif√≠cil aumentar oferta)\n‚Ä¢ Cumple 26/30 puntos de las 6 caracter√≠sticas\n‚Ä¢ Escaso, durable, divisible, fungible\n\n**Debilidad fatal:** Portabilidad limitada (3/5)\n‚Ä¢ $1M en oro = 16.6 kg\n‚Ä¢ Esto forz√≥ centralizaci√≥n en bancos\n‚Ä¢ Los bancos imprimieron m√°s papeles que oro real\n‚Ä¢ Llev√≥ al colapso en 1971 (Nixon Shock)\n\n**Bitcoin = Oro digital perfecto**\n‚Ä¢ 30/30 puntos\n‚Ä¢ $1M en Bitcoin = 12 palabras en tu cabeza",
            
            peso: "**Evaluaci√≥n del peso mexicano:**\n\n‚úÖ Portabilidad: 5/5 (digital es perfecto)\n‚úÖ Divisibilidad: 5/5 (hasta centavos)\n‚úÖ Fungibilidad: 5/5 (un peso = un peso)\n‚úÖ Verificabilidad: 4/5 (medidas de seguridad)\n‚ö†Ô∏è Durabilidad: 2/5 (billetes se desgastan, pero el VALOR se deteriora m√°s por inflaci√≥n)\n‚ùå Escasez: 1/5 (FALLA CR√çTICA - Banxico puede imprimir infinito)\n\n**Puntaje total: 22/30**\n\nEl peso funciona para transacciones diarias, pero NO para ahorrar a largo plazo.",
            
            mexico: "**Bitcoin en M√©xico:**\n\nüìä **Adopci√≥n creciente**\n‚Ä¢ ~4% de poblaci√≥n usa crypto (vs 16% global)\n‚Ä¢ Remesas: $60+ billones USD/a√±o (muchas v√≠a Bitcoin)\n‚Ä¢ Marco legal: Ley Fintech 2018\n\nüè¢ **Empresas:**\n‚Ä¢ ArcadiaB: Primera tesorer√≠a Bitcoin certificada\n‚Ä¢ Bitso: Exchange m√°s grande\n‚Ä¢ Adopci√≥n retail creciendo\n\n‚ö° **Desaf√≠os:**\n‚Ä¢ Volatilidad vs peso\n‚Ä¢ Educaci√≥n financiera\n‚Ä¢ Infraestructura Lightning Network\n\n¬øQuieres saber sobre algo espec√≠fico de M√©xico?",
            
            ayuda: "¬°Claro! Puedo ayudarte con:\n\nüìö **Contenido del curso**\n‚Ä¢ Explicar conceptos de cada cap√≠tulo\n‚Ä¢ Responder dudas sobre ejercicios\n‚Ä¢ Profundizar en temas espec√≠ficos\n\n‚Çø **Bitcoin en M√©xico**\n‚Ä¢ D√≥nde y c√≥mo comprar\n‚Ä¢ Estrategias de ahorro\n‚Ä¢ Marco legal y regulaci√≥n\n\nüè¶ **ArcadiaB / Pr√©stamos B2X**\n‚Ä¢ C√≥mo funcionan los pr√©stamos con Bitcoin\n‚Ä¢ Requisitos y proceso\n‚Ä¢ Estrategias de tesorer√≠a corporativa\n\n¬øQu√© tema te interesa m√°s?",
            
            default: function(userQuestion) {
                return `Interesante pregunta: "${userQuestion}"\n\nNo tengo una respuesta espec√≠fica pre-programada para esto, pero puedo ayudarte:\n\nüéì **Revisa los cap√≠tulos del curso** - Probablemente encuentres la respuesta en:\n‚Ä¢ Cap 1-4: Fundamentos (dinero, historia, oro, fiat)\n‚Ä¢ Cap 5-6: Inflaci√≥n y contexto\n‚Ä¢ Cap 7: Bitcoin t√©cnico\n‚Ä¢ Cap 8: Wallets, Lightning, ecosistema\n\nüí¨ **Contacta a ArcadiaB directamente:**\nSi tu pregunta es sobre servicios financieros (pr√©stamos, compra/venta), escribe a contacto@arcadiab.com\n\nüì± **√önete a la comunidad:**\nAsoBitcoin M√©xico tiene grupos activos donde puedes hacer preguntas y aprender de otros bitcoiners mexicanos.\n\n*Nota: Esta es una versi√≥n preliminar de Maxi con respuestas pre-programadas. Pronto tendr√© acceso completo a mi inteligencia en tiempo real para responder cualquier pregunta.*\n\n¬øHay algo m√°s espec√≠fico que pueda ayudarte?`;
            }
        };

        function getResponse(message) {
            const msg = message.toLowerCase();
            
            // Spending Bitcoin (must come before general "comprar")
            if (msg.includes('comprar cosas') || msg.includes('gastar bitcoin') || msg.includes('usar bitcoin') || 
                msg.includes('aceptan bitcoin') || msg.includes('pagar con bitcoin') || msg.includes('donde puedo usar')) {
                return mockResponses.gastarBitcoin;
            }
            
            // Buying Bitcoin
            if (msg.includes('comprar bitcoin') || msg.includes('donde compro bitcoin') || 
                msg.includes('c√≥mo comprar bitcoin') || msg.includes('adquirir bitcoin') ||
                msg.includes('donde comprar') || msg.includes('d√≥nde comprar')) {
                return mockResponses.comprarBitcoin;
            }
            
            // Lightning Network
            if (msg.includes('lightning') || msg.includes('pagos instant√°neos') || msg.includes('comisiones bajas')) {
                return mockResponses.lightning;
            }
            
            // Security
            if (msg.includes('seguro') || msg.includes('roban bitcoin') || msg.includes('hackean') || 
                msg.includes('perder bitcoin') || msg.includes('proteger') || msg.includes('wallet')) {
                return mockResponses.seguridad;
            }
            
            // ArcadiaB / B2X
            if (msg.includes('arcadiab') || msg.includes('arcadia') || msg.includes('b2x') ||
                msg.includes('prestamo') || msg.includes('pr√©stamo') || msg.includes('liquidez') || msg.includes('colateral')) {
                return mockResponses.arcadiab;
            }
            
            // Course
            if (msg.includes('curso') || msg.includes('capitulo') || msg.includes('cap√≠tulo')) {
                return mockResponses.curso;
            }
            
            // Inflation
            if (msg.includes('inflacion') || msg.includes('inflaci√≥n') || msg.includes('precios')) {
                return mockResponses.inflacion;
            }
            
            // Gold
            if (msg.includes('oro') && !msg.includes('tesoro')) {
                return mockResponses.oro;
            }
            
            // Peso
            if (msg.includes('peso') && (msg.includes('mexicano') || msg.includes('evalua') || msg.includes('bateria'))) {
                return mockResponses.peso;
            }
            
            // Mexico
            if (msg.includes('mexico') || msg.includes('m√©xico') || msg.includes('mexicano')) {
                return mockResponses.mexico;
            }
            
            // Bitcoin basics
            if (msg.includes('que es bitcoin') || msg.includes('qu√© es bitcoin') || msg.includes('explica bitcoin')) {
                return mockResponses.bitcoin;
            }
            
            // Help
            if (msg.includes('ayuda') || msg.includes('ayudame') || msg.includes('ay√∫dame')) {
                return mockResponses.ayuda;
            }
            
            // Default fallback with user question
            return mockResponses.default(message);
        }

        function addMessage(text, type) {
            if (firstMessage && type === 'user') {
                const welcome = messagesContainer.querySelector('.welcome-message');
                if (welcome) welcome.remove();
                firstMessage = false;
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            // For bot messages, allow HTML for links and formatting
            if (type === 'bot') {
                // Convert markdown-style bold to HTML
                text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                // Convert line breaks
                text = text.replace(/\n/g, '<br>');
                messageDiv.innerHTML = text;
            } else {
                messageDiv.textContent = text;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTyping() {
            typingIndicator.classList.add('show');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTyping() {
            typingIndicator.classList.remove('show');
        }

        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            chatInput.value = '';
            sendButton.disabled = true;
            showTyping();

            // Simulate thinking delay (300-900ms)
            const delay = Math.floor(Math.random() * 600) + 300;
            await new Promise(resolve => setTimeout(resolve, delay));

            hideTyping();
            const response = getResponse(message);
            addMessage(response, 'bot');
            
            sendButton.disabled = false;
            chatInput.focus();
        }

        sendButton.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Focus input on load
        chatInput.focus();
    </script>
</body>
</html>
